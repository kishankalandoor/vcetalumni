<%- include('../partials/navbar') %>
<div class="content-wrapper">
<%- include('../partials/flash') %>
<div class="container-fluid p-3">
    <h5 class="mb-3"><i class="bi bi-gear-fill me-2"></i>Admin Dashboard</h5>
    <div class="row g-3 mb-3">
        <div class="col-6">
            <div class="stat-card bg-primary">
                <div class="stat-icon"><i class="bi bi-people"></i></div>
                <div class="stat-info">
                    <h3><%= stats.totalUsers %></h3>
                    <p>Total Users</p>
                </div>
            </div>
        </div>
        <div class="col-6">
            <div class="stat-card bg-success">
                <div class="stat-icon"><i class="bi bi-file-post"></i></div>
                <div class="stat-info">
                    <h3><%= stats.totalPosts %></h3>
                    <p>Total Posts</p>
                </div>
            </div>
        </div>
    </div>
    <% if (postsAwaitingApproval && postsAwaitingApproval.length > 0) { %>
    <h6 class="mb-2">Pending Posts</h6>
    <% postsAwaitingApproval.forEach(post => { %>
    <div class="card mb-2">
        <div class="card-body">
            <strong><%= post.name %></strong>
            <p class="mb-2"><%= post.content.substring(0, 100) %>...</p>
            <form method="POST" action="/admin/posts/<%= post.id %>/approve" style="display:inline;">
                <button type="submit" class="btn btn-sm btn-success">Approve</button>
            </form>
            <form method="POST" action="/admin/posts/<%= post.id %>/delete" style="display:inline;">
                <button type="submit" class="btn btn-sm btn-danger">Delete</button>
            </form>
        </div>
    </div>
    <% }); %>
    <% } %>
</div>
</div>
<%- include('../partials/bottom-nav') %>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>