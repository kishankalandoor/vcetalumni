<%- include('../partials/navbar') %>
<div class="content-wrapper">
<%- include('../partials/flash') %>
<div class="container-fluid p-3">
    <div class="d-flex align-items-center mb-3">
        <a href="/profile/<%= profile.id %>" class="btn btn-sm btn-light me-2"><i class="bi bi-arrow-left"></i></a>
        <h5 class="mb-0">Edit Profile</h5>
    </div>
    <form method="POST" action="/profile/edit/<%= profile.id %>" enctype="multipart/form-data">
        <div class="card mb-3">
            <div class="card-body text-center">
                <% if (profile.profile_picture) { %>
                    <img src="/<%= profile.picture %>" alt="Profile" class="profile-picture-large mb-2">
                <% } else { %>
                    <div class="profile-picture-placeholder mb-2" style="width: 120px; height: 120px; margin: 0 auto;">
                        <%= profile.name.charAt(0).toUpperCase() %>
                    </div>
                <% } %>
                <label class="btn btn-primary btn-sm">
                    <i class="bi bi-camera me-1"></i>Change Photo
                    <input type="file" name="profile_picture" accept="image/*" class="d-none">
                </label>
            </div>
        </div>
        <div class="card mb-3">
            <div class="card-body">
                <div class="mb-3">
                    <label class="form-label">Batch Year</label>
                    <select class="form-select" name="batch_year">
                        <option value="">Select Year</option>
                        <% for (let y = 2029; y >= 2000; y--) { %>
                            <option value="<%= y %>" <%= profile.batch_year == y ? 'selected' : '' %>><%= y %></option>
                        <% } %>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Department</label>
                    <input type="text" class="form-control" name="department" value="<%= profile.department || '' %>">
                </div>
                <div class="mb-3">
                    <label class="form-label">Company</label>
                    <input type="text" class="form-control" name="company" value="<%= profile.company || '' %>">
                </div>
                <div class="mb-3">
                    <label class="form-label">Designation</label>
                    <input type="text" class="form-control" name="designation" value="<%= profile.designation || '' %>">
                </div>
                <div class="mb-3">
                    <label class="form-label">Skills</label>
                    <input type="text" class="form-control" name="skills" value="<%= profile.skills || '' %>">
                </div>
                <div class="mb-3">
                    <label class="form-label">Bio</label>
                    <textarea class="form-control" name="bio" rows="4"><%= profile.bio || '' %></textarea>
                </div>
                <div class="mb-3">
                    <label class="form-label">Location</label>
                    <input type="text" class="form-control" name="location" value="<%= profile.location || '' %>">
                </div>
                <div class="mb-3">
                    <label class="form-label">Contact Email</label>
                    <input type="email" class="form-control" name="contact_email" value="<%= profile.contact_email || '' %>">
                </div>
                <div class="mb-3">
                    <label class="form-label">LinkedIn URL</label>
                    <input type="url" class="form-control" name="linkedin_url" value="<%= profile.linkedin_url || '' %>">
                </div>
                <div class="mb-3">
                    <label class="form-label">GitHub URL</label>
                    <input type="url" class="form-control" name="github_url" value="<%= profile.github_url || '' %>">
                </div>
            </div>
        </div>
        <div class="d-grid gap-2 mb-5">
            <button type="submit" class="btn btn-primary"><i class="bi bi-check-circle me-2"></i>Save Changes</button>
            <a href="/profile/<%= profile.id %>" class="btn btn-outline-secondary">Cancel</a>
        </div>
    </form>
</div>
</div>
<%- include('../partials/bottom-nav') %>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>